import"../chunks/DsnmJJEf.js";import{K as hr,w as Ft,a8 as We,V as Ie,u as xe,Q as t,am as G,ak as k,W as y,I as Se,a9 as U,ae as f,af as g,ac as O,ad as qe,aa as Ee,ag as I,as as gr,an as mr,ab as X,ah as P,ao as Lt,al as Ot,ar as Ue,b5 as Et,b6 as fr}from"../chunks/B57AIq1f.js";import{G as Pe,A as w,h as ht,j as Ve,e as ze,S as Dt,i as Ke,c as $,t as Y,b as te,d as J,g as gt,P as pr,r as Xe,k as mt,f as ft,s as Z,l as vr,m as dt,n as je,o as Ze,p as _r,q as Bt,I as Ne,u as br,v as xr,w as wr,a as Tr}from"../chunks/D3M6gYlC.js";import{i as le}from"../chunks/BzqTCghL.js";import{p as ge,b as Ge}from"../chunks/Dx3SdneK.js";import{o as yr}from"../chunks/DPNAPIAT.js";function Mr(c,e,r){hr(()=>{var i=Ft(()=>e(c,r?.())||{});if(i?.destroy)return()=>i.destroy()})}const Hr=async({parent:c})=>{const{dataset:e}=await c();return{dataset:e}},Bi=Object.freeze(Object.defineProperty({__proto__:null,load:Hr},Symbol.toStringTag,{value:"Module"}));function Cr(c,e,r,i=Pe.Unspecified,a){a||(i===Pe.Female?a=76:i===Pe.Male?a=86:a=79);const d=789,u=i===Pe.Male?.68:.55,s=c*(e/100)*d,m=s/r,h=s/(a*u),l=h/r,x=s/12;return[parseFloat(s.toFixed(2)),parseFloat(m.toFixed(2)),parseFloat(h.toFixed(3)),parseFloat(l.toFixed(4)),parseFloat(x.toFixed(1))]}class Sr{data=[];personalInfo;filters=[];possibleValues={};columnTypes={};minAndMaxValues=[];constructor(e,r){this.personalInfo=r||{weight:null,gender:Pe.Unspecified};const[i,...a]=e,d=["Alkoholigrammat","Alkoholigrammat / €","Arvioidut promillet","Promillet / €","Annokset"],u=_=>typeof _=="string"&&_.trim()!==""&&!isNaN(_);this.filters=[...i,...d];const s=i.indexOf(w.Type),m=[...Array(i.length)].map(()=>[]),h=[...Array(d.length)].map(()=>[]);for(let _=0;_<a.length;_++){const H={};if(a[_][s]==="lahja- ja juomatarvikkeet")continue;for(let M=0;M<i.length;M++){const T=i[M];let S=a[_][M];const V=S!==void 0&&u(S)&&!["Numero","Nimi","Valmistaja"].includes(T)||typeof S=="number";T===w.BottleSize?S=parseFloat(S):V?S=Number(S):typeof S=="string"?S=S.trim().toLowerCase().charAt(0).toUpperCase()+S.slice(1):S="",H[T]=S,(V||S.length||T===w.BottleSize)&&m[M].push(S)}const D=Cr(H[w.BottleSize],H[w.AlcoholPercentage],H[w.Price],r?.gender,r?.weight??void 0);d.forEach((M,T)=>{h[T].push(D[T]),H[M]=D[T]}),this.data.push(H)}const l=[...i,...d],x=[...m,...h];this.possibleValues=Object.fromEntries(x.map((_,H)=>[l[H],new Set(_.sort())])),this.columnTypes=Object.fromEntries(Object.entries(this.possibleValues).map(([_,H])=>[_,typeof H.values().next().value])),this.minAndMaxValues=l.map((_,H)=>this.columnTypes[_]!=="number"||_===w.SortingCode?null:[Math.min(...x[H]),Math.max(...x[H])]),this.data=this.sortBy(ht)}getFilterKeys(){return this.filters}getFilterValues(e){return this.possibleValues[e]?Array.from(this.possibleValues[e]):[]}getFilterType(e){return this.columnTypes[e]}getMinAndMaxValues(e){return this.minAndMaxValues[this.filters.indexOf(e)]}fuzzySearch(e,r){const i=r.toLowerCase();return this.data.filter(a=>a[e]&&a[e].toString().toLowerCase().includes(i))}sortBy(e,r=!0){return this.data.sort((i,a)=>i[e]<a[e]?r?-1:1:i[e]>a[e]?r?1:-1:0)}sortByNested(e,r,i=!0){return r?this.data.sort((a,d)=>a[e][r]<d[e][r]?i?-1:1:a[e][r]>d[e][r]?i?1:-1:0):this.sortBy(e,i)}filter(e){return e=Object.fromEntries(Object.entries(e).filter(([r,i])=>i instanceof Set?i.size>0:i.length>0)),this.data.filter(r=>Object.keys(e).every(i=>this.getFilterType(i)==="number"&&Array.isArray(e[i])&&e[i].length===2?r[i]>=e[i][0]&&r[i]<=e[i][1]:e[i]instanceof Set?r[i]&&e[i].has(r[i]):Array.isArray(e[i])?r[i]&&e[i].includes(r[i]):r[i]===e[i]))}filterByRange(e,r,i){return this.data.filter(a=>{const d=Number(a[e]);return!isNaN(d)&&d>=r&&d<=i})}getPossibleValues(){const e={};return this.filters.forEach(r=>{e[r]=Array.from(this.possibleValues[r])}),e}}const Ir={smoothScroll:!0,shouldThrowOnBounds:!0,align:"auto"},Er=(c,e,r)=>{if(c===0)return 0;const i=c*e;return Math.max(0,i-r)},At=(c,e,r,i,a,d,u,s,m,h,l)=>{if(d==="bottomToTop"){const x=Math.ceil(e/r)+1,_=h??i*r,E=Math.max(0,_-e)-c,D=Math.floor(E/r);if(D<0)return{start:0,end:Math.min(i,x+a*2)};const M=Math.max(0,D-a),T=Math.min(i,D+x+a);return{start:M,end:T}}else{const x=Math.floor(c/r),_=Math.min(i,x+Math.ceil(e/r)+1),H=h??i*r,E=Math.max(0,H-e),D=Math.max(1,Math.floor(r*.25));if(Math.abs(c-E)<=D){const V=i;let z=V,ne=0;const we=me=>{const ce=l?l[me]:void 0;return Number.isFinite(ce)&&ce>0?ce:r};for(;z>0&&ne<e;){const me=we(z-1);ne+=me,z-=1}return{start:Math.max(0,z-a),end:V}}const T=Math.max(0,x-a),S=Math.min(i,_+a);return{start:T,end:S}}},Dr=(c,e,r,i,a,d,u,s,m)=>{const h=d||m||0;if(c==="bottomToTop"){const l=u??e*a,x=(e-r)*a,_=Math.max(0,h-l);return x+_}else{if(s){const l=he(s,a,i);return Math.max(0,Math.round(l))}return i*a}},Br=(c,e,r=!1)=>{const{initialized:i,mode:a,containerElement:d,viewportElement:u,calculatedItemHeight:s,scrollTop:m}=c,{setHeight:h,setScrollTop:l}=e;if(r&&d&&u&&i){const x=d.getBoundingClientRect().height;if(h(x),a==="bottomToTop"){const H=Math.floor(m/s)*s;u.scrollTop=H,l(H)}}},Ar=(c,e,r,i,a,d=0,u=0,s="topToBottom")=>{const m=c.filter(E=>E);if(m.length===0)return{newHeight:i,newLastMeasuredIndex:e.start,updatedHeightCache:r,clearedDirtyItems:new Set,newTotalHeight:d,newValidCount:u,heightChanges:[]};const h={...r},l=new Set,x=[];let _=d,H=u;return a.size>0?a.forEach(E=>{let D;s==="bottomToTop"?D=m.length-1-(E-e.start):D=E-e.start;const M=m[D];if(M&&D>=0&&D<m.length)try{M.offsetHeight;const T=M.getBoundingClientRect().height,S=h[E];if(Number.isFinite(T)&&T>0&&(!S||Math.abs(S-T)>=.1)){const V=S||i,z=T-V;x.push({index:E,oldHeight:V,newHeight:T,delta:z}),S&&Number.isFinite(S)&&S>0?_=_-S+T:(_+=T,H++),h[E]=T}l.add(E)}catch{l.add(E)}else l.add(E)}):m.forEach((E,D)=>{const M=s==="bottomToTop"?Math.max(0,(e.end??e.start+m.length)-1-D):e.start+D;if(!h[M])try{const T=E.getBoundingClientRect().height;Number.isFinite(T)&&T>0&&(_+=T,H++,h[M]=T)}catch{}}),{newHeight:H>0?_/H:i,newLastMeasuredIndex:e.start,updatedHeightCache:h,clearedDirtyItems:l,newTotalHeight:_,newValidCount:H,heightChanges:x}},he=(c,e,r,i,a=1e3)=>{const d=Math.max(0,Math.floor(r));if(d<=0)return 0;{let u=0;for(let s=0;s<d;s++){const m=c[s],h=Number.isFinite(m)&&m>0?m:e;u+=h}return u}},kr=(c,e,r,i,a,d,u,s,m,h,l=0,x=0,_="topToBottom")=>{const H=r();return H.start===d&&h.size===0?null:(e&&clearTimeout(e),setTimeout(()=>{const{newHeight:D,newLastMeasuredIndex:M,updatedHeightCache:T,clearedDirtyItems:S,newTotalHeight:V,newValidCount:z,heightChanges:ne}=Ar(i,H,a,u,h,l,x,_);(Math.abs(D-u)>1||h.size>0)&&s({newHeight:D,newLastMeasuredIndex:M,updatedHeightCache:T,clearedDirtyItems:S,newTotalHeight:V,newValidCount:z,heightChanges:ne})},m))};function Rr(){let c=!1,e=null;return r=>{e=r,c||(c=!0,requestAnimationFrame(()=>{c=!1,e&&(e(),e=null)}))}}const Fr=(c,e,r,i=1)=>{const a=r[c];return a===void 0?!0:Math.abs(e-a)>i};function Lr(c,e,r,i){return c?c.start!==e.start||c.end!==e.end||r!==i:!0}function Or(c,e,r,i,a,d,u){const s=a<=1,m=a>=u-d-1;return{visibleItemsCount:c.end-c.start,startIndex:c.start,endIndex:c.end,totalItems:e,processedItems:r,averageItemHeight:i,atTop:s,atBottom:m,totalHeight:u}}const Vr=c=>{const{mode:e,align:r,targetIndex:i,itemsLength:a,calculatedItemHeight:d,height:u,scrollTop:s,firstVisibleIndex:m,lastVisibleIndex:h,heightCache:l}=c;return e==="bottomToTop"?Nr({align:r,targetIndex:i,itemsLength:a,calculatedItemHeight:d,height:u,scrollTop:s,firstVisibleIndex:m,lastVisibleIndex:h,heightCache:l}):Pr({align:r,targetIndex:i,calculatedItemHeight:d,height:u,scrollTop:s,firstVisibleIndex:m,lastVisibleIndex:h,heightCache:l})},Nr=c=>{const{align:e,targetIndex:r,itemsLength:i,calculatedItemHeight:a,height:d,scrollTop:u,firstVisibleIndex:s,lastVisibleIndex:m,heightCache:h}=c,l=he(h,a,i),x=he(h,a,r),_=a;if(e==="auto"){if(r<s)return Math.max(0,l-(x+_));if(r>m-1)return Math.max(0,l-x-d);{const H=l-(x+_),E=l-x,D=Math.abs(u-H),M=Math.abs(u+d-E);return D<M?H:Math.max(0,E-d)}}else{if(e==="top")return Math.max(0,l-(x+_));if(e==="bottom")return Math.max(0,l-x-d);if(e==="nearest"){const H=l-(x+_),E=l-x;if(E<=u||H>=u+d){const D=Math.abs(u-H),M=Math.abs(u+d-E);return D<M?H:Math.max(0,E-d)}else return null}}return null},Pr=c=>{const{align:e,targetIndex:r,calculatedItemHeight:i,height:a,scrollTop:d,firstVisibleIndex:u,lastVisibleIndex:s,heightCache:m}=c;if(e==="auto"){if(r<u)return he(m,i,r);if(r>s-1){const h=he(m,i,r+1);return Math.max(0,h-a)}else{const h=he(m,i,r),l=he(m,i,r+1),x=Math.abs(d-h),_=Math.abs(d+a-l);return x<_?h:Math.max(0,l-a)}}else{if(e==="top")return he(m,i,r);if(e==="bottom"){const h=he(m,i,r+1);return Math.max(0,h-a)}else if(e==="nearest"){const h=he(m,i,r),l=he(m,i,r+1);if(l<=d||h>=d+a){const x=Math.abs(d-h),_=Math.abs(d+a-l);return x<_?h:Math.max(0,l-a)}else return null}}return null},kt={now:()=>typeof performance<"u"&&performance.now?performance.now():Date.now()},Ur=(c,e,r={})=>{const{leading:i=!0,trailing:a=!1}=r;let d=0,u=null,s=null,m=!0;const h=l=>{d=kt.now(),c(...l)};return((...l)=>{const x=kt.now(),_=m?e:x-d;if(s=l,u&&(clearTimeout(u),u=null),_>=e)i&&(m=!1,h(l)),a&&!i&&(u=setTimeout(()=>{s&&h(s),u=null},e));else if(m&&i)m=!1,h(l);else if(a){const H=e-_;u=setTimeout(()=>{s&&h(s),u=null},H)}})};var zr=U("<!> <div><!></div>",1),jr=U("<div><div><div><div></div></div></div></div>");function Vt(c,e){We(e,!0);const r=Rr(),i=!1,a=ge(e,"items",19,()=>[]),d=ge(e,"defaultEstimatedItemHeight",3,40),u=ge(e,"debug",3,!1),s=ge(e,"mode",3,"topToBottom"),m=ge(e,"bufferSize",3,20),h=Ie([]);let l=k(0);const x=!1;let _=k(!1),H=k(-1),E=k(0),D=null,M=null,T=null;const S=Ie(new Set);let V=k(0),z=k(0),ne=k(null),we=k(0),me=k(0),ce=k(null);const n=new Wr({itemLength:a().length,itemHeight:d(),internalDebug:i});let ae=k(0);const Te=G(()=>()=>{const o=t(ve)();return(s()==="bottomToTop"?a().slice(o.start,o.end).reverse():a().slice(o.start,o.end)).map((A,R)=>({item:A,originalIndex:s()==="bottomToTop"?o.end-1-R:o.start+R,sliceIndex:R}))}),ue=o=>{if(!n.viewportElement||!n.initialized||t(se))return;if(s()==="bottomToTop"&&pe&&!t(ye)&&performance.now()>=t(ae)&&!n.isDynamicUpdateInProgress){const B=Math.max(0,t(Q)()-t(l));n.viewport.scrollTop=B,n.scrollTop=B,Se().then(()=>{const L=n.viewport.querySelector('[data-original-index="0"]');L&&(L.scrollIntoView({block:"end",behavior:"smooth",inline:"nearest"}),n.scrollTop=n.viewport.scrollTop)});return}const b=n.viewport.scrollTop,A=Math.max(0,t(Q)()-t(l));let R=0;const N=t(ve)();for(const B of o)B.index<N.start&&(R+=B.delta);if(Math.abs(R)>1){const B=Math.min(A,Math.max(0,b+R));n.viewport.scrollTop=B,n.scrollTop=B}},fe=Ur(()=>{t(V)>0&&(pe=t(He),n.startDynamicUpdate(),ee())},16,{leading:!0,trailing:!0});xe(()=>{fe()}),xe(()=>{n.updateItemLength(a().length)});const ee=()=>{y(me,n.totalHeight,!0),D=kr(x,D,t(ve),h,n.getHeightCache(),t(H),n.averageHeight,o=>{if(n.itemHeight=o.newHeight,y(H,o.newLastMeasuredIndex,!0),o.heightChanges.length>0&&n.processDirtyHeights(o.heightChanges),o.heightChanges.length>0&&s()==="bottomToTop"&&ue(o.heightChanges),s()==="topToBottom"&&n.isReady&&n.initialized){const b=t(me),A=n.totalHeight,R=A-b;if(Math.abs(R)>1){const N=Math.max(0,A-(t(l)||0)),B=Math.max(n.averageHeight,10),L=n.viewport.scrollTop;if(Math.abs(L-N)<=B){const F=Math.min(N,Math.max(0,L+R));n.viewport.scrollTop=F,n.scrollTop=F}}}Ft(()=>{S.clear(),y(V,0),pe=!1}),n.endDynamicUpdate()},t(H)<0?0:100,S,0,0,s())};let se=k(!1),ye=k(!1),Me=k(0),oe=k(0);const Q=G(()=>()=>n.totalHeight),He=G(()=>n.scrollTop>=t(Q)()-t(l)-1);let pe=!1,Ce=null;function De(){if(!n.viewportElement)return;const o=n.viewport.querySelector('[data-original-index="999"]');if(!o)return;const b=n.viewport.getBoundingClientRect(),A=o.getBoundingClientRect();y(ce,Math.round(Math.abs(A.bottom-b.bottom)),!0)}xe(()=>{if(n.initialized&&s()==="bottomToTop"&&n.viewportElement){const o=Math.max(0,t(Q)()-t(l)),b=n.viewport.scrollTop,A=Math.abs(b-o),R=Math.abs(n.averageHeight-t(Me))>1,N=Math.max(0,t(Q)()-t(l)),B=Math.abs(b-N)<n.averageHeight;if(R&&!t(se)&&!B&&!t(ye)&&performance.now()>=t(ae)&&!n.isDynamicUpdateInProgress&&A>n.averageHeight*3){const j=Math.round(o);n.viewport.scrollTop=j,n.scrollTop=j}A>n.averageHeight*5&&y(se,!0),y(Me,n.averageHeight,!0)}}),xe(()=>{const o=a().length;if(n.initialized&&s()==="bottomToTop"&&n.isReady&&t(oe)>0&&o-t(oe)!==0){const A=n.viewport.scrollTop,R=n.averageHeight,N=t(l),B=t(Q)(),L=Math.max(0,B-N);(Math.abs(A-Math.max(0,t(oe)*R-N))<R*2||A===0)&&n.runDynamicUpdate(()=>{const F=L;n.viewport.scrollTop=F,n.scrollTop=F,y(se,!1)})}y(oe,o,!0)}),xe(()=>{if(n.isReady){const o=n.container.getBoundingClientRect().height;Number.isFinite(o)&&o>0&&y(l,o,!0)}}),xe(()=>{if(t(l)===0&&n.isReady){const o=n.container.getBoundingClientRect().height;Number.isFinite(o)&&o>0&&y(z,o,!0)}});const ve=G(()=>()=>{if(!a().length)return{start:0,end:0};const o=t(l)||0;if(s()==="bottomToTop"&&!n.initialized&&n.scrollTop===0&&o>0){const b=Math.max(0,t(Q)()-o);return Ce=At(b,o,n.averageHeight,a().length,m(),s(),t(He),pe,Ce,t(Q)(),n.getHeightCache()),Ce}return Ce=At(n.scrollTop,o,n.averageHeight,a().length,m(),s(),t(He),pe,Ce,t(Q)(),n.getHeightCache()),Ce}),ke=()=>{n.viewportElement&&(t(_)||(y(_,!0),r(()=>{const o=n.viewport.scrollTop;s()==="bottomToTop"&&t(E)-o>.5&&(y(ae,performance.now()+300),y(se,!0)),y(E,o,!0),n.scrollTop=o,De(),y(_,!1)})))},$e=(o=!1)=>{if(!n.initialized&&s()==="bottomToTop"){Se().then(()=>{if(n.isReady){const b=n.container.getBoundingClientRect().height;y(l,b,!0),Se().then(()=>{if(n.isReady){const A=n.container.getBoundingClientRect().height;y(l,A,!0);const R=Er(a().length,n.averageHeight,A);n.container.offsetHeight,n.viewport.scrollTop=R,n.scrollTop=R,requestAnimationFrame(()=>{n.viewport.scrollTop!==n.scrollTop&&(n.viewport.scrollTop=R,n.scrollTop=R),n.initialized=!0})}})}});return}Br({initialized:n.initialized,mode:s(),containerElement:n.containerElement,viewportElement:n.viewportElement,calculatedItemHeight:n.averageHeight,height:t(l),scrollTop:n.scrollTop},{setHeight:b=>y(l,b,!0),setScrollTop:b=>n.scrollTop=b},o)};T=new ResizeObserver(o=>{Se().then(()=>{let b=!1;t(ve)();for(const A of o){const R=A.target,N=h.indexOf(R),B=parseInt(R.dataset.originalIndex||"-1",10);if(N!==-1&&B>=0){const L=R.getBoundingClientRect().height;Fr(B,L,n.getHeightCache())&&(t(V)===0&&(pe=t(He)),S.add(B),y(V,S.size,!0),b=!0)}}b&&r(()=>{ee()})})}),yr(()=>($e(),Se().then(()=>requestAnimationFrame(()=>requestAnimationFrame(()=>ee()))),M=new ResizeObserver(()=>{$e(!0)}),n.isReady&&M.observe(n.container),()=>{M&&M.disconnect(),T&&T.disconnect()})),xe(()=>{});const Ye=(o,b=!0,A=!0)=>{Re({index:o,smoothScroll:b,shouldThrowOnBounds:A})},Re=async o=>{const{index:b,smoothScroll:A,shouldThrowOnBounds:R,align:N}={...Ir,...o};if(!a().length)return;if(!n.viewportElement){Se().then(()=>{n.viewportElement&&Re({index:b,smoothScroll:A,shouldThrowOnBounds:R,align:N})});return}let B=b;if(B<0||B>=a().length){if(R)throw new Error(`scroll: index ${B} is out of bounds (0-${a().length-1})`);B=Math.max(0,Math.min(B,a().length-1))}const{start:L,end:j}=t(ve)(),F=Vr({mode:s(),align:N||"auto",targetIndex:B,itemsLength:a().length,calculatedItemHeight:n.averageHeight,height:t(l),scrollTop:n.scrollTop,firstVisibleIndex:L,lastVisibleIndex:j,heightCache:n.getHeightCache()});if(F!==null){if(y(ye,!0),s()==="bottomToTop"&&A){const re=n.viewport.querySelectorAll("[data-original-index]");let ie=-1,_e=null;for(const K of re){const be=parseInt(K.getAttribute("data-original-index")||"-1");be>ie&&(ie=be,_e=K)}_e?.scrollIntoView({behavior:"smooth"}),await Se(),await new Promise(K=>setTimeout(K,100)),await Se()}n.viewport.scrollTo({top:F,behavior:A?"smooth":"auto"}),requestAnimationFrame(()=>{n.scrollTop=F}),setTimeout(()=>{y(ye,!1)},A?500:100)}};function tt(o){return T&&T.observe(o),{destroy(){T&&T.unobserve(o)}}}var rt={scrollToIndex:Ye,scroll:Re},C=jr();Ve(C,()=>({id:"virtual-list-container",...e.testId?{"data-testid":`${e.testId}-container`}:{},class:e.containerClass??"virtual-list-container"}),void 0,void 0,"svelte-4xpf5r");var p=f(C);Ve(p,()=>({id:"virtual-list-viewport",...e.testId?{"data-testid":`${e.testId}-viewport`}:{},class:e.viewportClass??"virtual-list-viewport",onscroll:ke}),void 0,void 0,"svelte-4xpf5r");var v=f(p);Ve(v,o=>({id:"virtual-list-content",...e.testId?{"data-testid":`${e.testId}-content`}:{},class:e.contentClass??"virtual-list-content",[Dt]:o}),[()=>({height:`${Math.max(t(l),t(Q)())??""}px`})],void 0,"svelte-4xpf5r");var W=f(v);return Ve(W,o=>({id:"virtual-list-items",...e.testId?{"data-testid":`${e.testId}-items`}:{},class:e.itemsClass??"virtual-list-items",[Dt]:o}),[()=>({visibility:t(l)===0&&s()==="bottomToTop"?"hidden":"visible",transform:`translateY(${(()=>{const o=t(l)||t(z)||0,b=t(ve)(),A=o===0?400:o;return Math.round(Dr(s(),a().length,b.end,b.start,n.averageHeight,A,t(Q)(),n.getHeightCache(),t(z)))})()??""}px)`})],void 0,"svelte-4xpf5r"),ze(W,23,()=>t(Te)(),o=>o.originalIndex,(o,b,A)=>{var R=zr(),N=Ee(R);{var B=F=>{const re=G(()=>Or(t(ve)(),a().length,Object.keys(n.getHeightCache()).length,n.averageHeight,n.scrollTop,t(l)||0,t(Q)()));var ie=mr();X(_e=>P(ie,_e),[()=>e.debugFunction?e.debugFunction(t(re)):void 0]),O(F,ie)};le(N,F=>{u()&&t(A)===0&&Lr(t(ne),t(ve)(),t(we),n.averageHeight)&&F(B)})}var L=I(N,2);Ve(L,()=>({"data-original-index":t(b).originalIndex,...e.testId?{"data-testid":`${e.testId}-item-${t(b).originalIndex}`}:{}}),void 0,void 0,"svelte-4xpf5r");var j=f(L);gr(j,()=>e.renderItem,()=>t(b).item,()=>t(b).originalIndex),g(L),Ge(L,(F,re)=>h[re.sliceIndex]=F,F=>h?.[F.sliceIndex],()=>[t(b)]),Mr(L,F=>tt?.(F)),O(o,R)}),g(W),g(v),g(p),Ge(p,o=>n.viewportElement=o,()=>n?.viewportElement),g(C),Ge(C,o=>n.containerElement=o,()=>n?.containerElement),O(c,C),qe(rt)}class Gr{onRecompute;isScheduled=!1;isPending=!1;blockDepth=0;timeoutId=null;constructor(e){this.onRecompute=e}schedule=()=>{if(this.blockDepth>0){this.isPending=!0;return}this.isScheduled||(this.isScheduled=!0,this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.timeoutId=setTimeout(()=>{this.timeoutId=null,this.isScheduled=!1,this.onRecompute()},0))};block=()=>{this.blockDepth+=1,this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null,this.isScheduled=!1,this.isPending=!0)};unblock=()=>{this.blockDepth!==0&&(this.blockDepth-=1,this.blockDepth===0&&this.isPending&&(this.isPending=!1,this.onRecompute()))};cancel=()=>{this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),this.isScheduled=!1,this.isPending=!1}}class Wr{#a=k(0);get _totalMeasuredHeight(){return t(this.#a)}set _totalMeasuredHeight(e){y(this.#a,e,!0)}#n=k(0);get _measuredCount(){return t(this.#n)}set _measuredCount(e){y(this.#n,e,!0)}#s=k(0);get _itemLength(){return t(this.#s)}set _itemLength(e){y(this.#s,e,!0)}#o=k(40);get _itemHeight(){return t(this.#o)}set _itemHeight(e){y(this.#o,e,!0)}#l=k(40);get _averageHeight(){return t(this.#l)}set _averageHeight(e){y(this.#l,e,!0)}#c=k(0);get _totalHeight(){return t(this.#c)}set _totalHeight(e){y(this.#c,e,!0)}_measuredFlags=null;#u=k(!1);get _initialized(){return t(this.#u)}set _initialized(e){y(this.#u,e,!0)}#d=k(0);get _scrollTop(){return t(this.#d)}set _scrollTop(e){y(this.#d,e,!0)}#h=k(null);get _containerElement(){return t(this.#h)}set _containerElement(e){y(this.#h,e,!0)}#g=k(null);get _viewportElement(){return t(this.#g)}set _viewportElement(e){y(this.#g,e,!0)}_internalDebug=!1;#m=k(!1);get _isReady(){return t(this.#m)}set _isReady(e){y(this.#m,e,!0)}#f=k(!1);get _dynamicUpdateInProgress(){return t(this.#f)}set _dynamicUpdateInProgress(e){y(this.#f,e,!0)}#p=k(0);get _dynamicUpdateDepth(){return t(this.#p)}set _dynamicUpdateDepth(e){y(this.#p,e,!0)}#v=k(null);get _itemsWrapperElement(){return t(this.#v)}set _itemsWrapperElement(e){y(this.#v,e,!0)}#_=k(!1);get _gridDetected(){return t(this.#_)}set _gridDetected(e){y(this.#_,e,!0)}#b=k(1);get _gridColumns(){return t(this.#b)}set _gridColumns(e){y(this.#b,e,!0)}_gridObserver=null;_mutationObserver=null;_heightCache={};_scheduler=new Gr(()=>this.recomputeDerivedHeights());recomputeDerivedHeights(){const e=this._measuredCount>0?this._totalMeasuredHeight/this._measuredCount:this._itemHeight;this._averageHeight=e;const r=this._itemLength-this._measuredCount;this._totalHeight=this._totalMeasuredHeight+r*e}recomputeIsReady(){this._isReady=!!this._containerElement&&!!this._viewportElement}scheduleRecomputeDerivedHeights(){const e=typeof navigator<"u"&&typeof navigator.userAgent=="string"?/jsdom/i.test(navigator.userAgent):!1;if(typeof window>"u"||e){this.recomputeDerivedHeights();return}if(this._dynamicUpdateDepth>0){this._scheduler.block();return}this._scheduler.schedule()}get totalMeasuredHeight(){return this._totalMeasuredHeight}get measuredCount(){return this._measuredCount}get itemLength(){return this._itemLength}get itemHeight(){return this._itemHeight}set itemHeight(e){this._itemHeight=e,this.scheduleRecomputeDerivedHeights()}get initialized(){return this._initialized}set initialized(e){if(this._initialized)throw new Error("ReactiveListManager: initialized flag cannot be set to true after it has been set to true");this._initialized=e}get scrollTop(){return this._scrollTop}set scrollTop(e){this._internalDebug&&this.#w(e),this._scrollTop=e}get containerElement(){return this._containerElement}get container(){if(!this._isReady)throw new Error("ReactiveListManager: container is not ready");return this._containerElement}set containerElement(e){this._containerElement=e,this.recomputeIsReady()}get viewportElement(){return this._viewportElement}get viewport(){if(!this._isReady)throw new Error("ReactiveListManager: viewport is not ready");return this._viewportElement}set viewportElement(e){this._viewportElement=e,this.recomputeIsReady()}get itemsWrapperElement(){return this._itemsWrapperElement}set itemsWrapperElement(e){if(this._itemsWrapperElement!==e){if(this._gridObserver){try{this._gridObserver.disconnect()}catch{}this._gridObserver=null}if(this._mutationObserver){try{this._mutationObserver.disconnect()}catch{}this._mutationObserver=null}}if(this._itemsWrapperElement=e,!e){this._gridDetected=!1,this._gridColumns=1;return}this.#T(),this.#y(),this.#r()}get gridDetected(){return this._gridDetected}get gridColumns(){return this._gridColumns}get isReady(){return this._isReady}get isDynamicUpdateInProgress(){return this._dynamicUpdateDepth>0}startDynamicUpdate(){const e=this._dynamicUpdateDepth===0;this._dynamicUpdateDepth+=1,e&&(this._dynamicUpdateInProgress=!0,this._isReady&&this._viewportElement&&this._viewportElement.style.setProperty("overflow-anchor","none"))}endDynamicUpdate(){this._dynamicUpdateDepth<=0||(this._dynamicUpdateDepth-=1,this._dynamicUpdateDepth===0&&(this._isReady&&this._viewportElement&&this._viewportElement.style.setProperty("overflow-anchor","auto"),this._dynamicUpdateInProgress=!1,this._scheduler.unblock()))}async runDynamicUpdate(e){this.startDynamicUpdate();try{const r=e();return r instanceof Promise?await r:r}finally{this.endDynamicUpdate()}}#x=null;#i=0;#e=0;#t=!1;#w(e){const r=typeof performance<"u"&&performance.now?performance.now():Date.now();this.#x===e?r-this.#i<=1e3?(this.#e+=1,this.#e>10&&!this.#t&&(this.#t=!0)):(this.#i=r,this.#e=1,this.#t=!1):(this.#x=e,this.#i=r,this.#e=1,this.#t=!1)}get averageHeight(){return this._averageHeight}get totalHeight(){return this._totalHeight}flushRecompute=()=>{this.recomputeDerivedHeights()};getHeightCache(){return this._heightCache}constructor(e){this._itemLength=e.itemLength,this._itemHeight=e.itemHeight,this._internalDebug=e.internalDebug??!1,this._measuredFlags=new Uint8Array(Math.max(0,this._itemLength)),this.recomputeDerivedHeights()}processDirtyHeights(e){if(e.length===0)return;let r=0,i=0;for(const u of e){const{index:s,oldHeight:m,newHeight:h}=u;m!==void 0&&(r-=m,i-=1),h!==void 0?(r+=h,i+=1,this._heightCache[s]=h):delete this._heightCache[s],this._measuredFlags&&s>=0&&s<this._measuredFlags.length&&(this._measuredFlags[s]=1)}const a=typeof navigator<"u"&&typeof navigator.userAgent=="string"?/jsdom/i.test(navigator.userAgent):!1;if(typeof window>"u"||a){if(r===0&&i===0)return}else if(i===0)return;this._totalMeasuredHeight+=r,this._measuredCount+=i,this.scheduleRecomputeDerivedHeights()}updateItemLength(e){this._itemLength=e,this._measuredFlags=new Uint8Array(Math.max(0,e)),this.recomputeDerivedHeights()}updateEstimatedHeight(e){this._itemHeight=e,this.scheduleRecomputeDerivedHeights()}setMeasuredHeight(e,r){if(e<0||e>=this._itemLength)return;const i=this._heightCache[e];Number.isFinite(i)&&i>0?this._totalMeasuredHeight-=i:this._measuredCount+=1,Number.isFinite(r)&&r>0&&(this._heightCache[e]=r,this._totalMeasuredHeight+=r,this.scheduleRecomputeDerivedHeights())}reset(){this._totalMeasuredHeight=0,this._measuredCount=0,this._measuredFlags=this._itemLength>0?new Uint8Array(this._itemLength):null,this.scheduleRecomputeDerivedHeights()}getDebugInfo(){return{totalMeasuredHeight:this._totalMeasuredHeight,measuredCount:this._measuredCount,itemLength:this._itemLength,coveragePercent:this._itemLength>0?this._measuredCount/this._itemLength*100:0,itemHeight:this._itemHeight,averageHeight:this.averageHeight,totalHeight:this.totalHeight,gridDetected:this._gridDetected,gridColumns:this._gridColumns}}getMeasurementCoverage(){return this.getDebugInfo().coveragePercent}hasSufficientMeasurements(e=10){return this.getMeasurementCoverage()>=e}recomputeGridDetection(){this.#r()}#T(){const e=this._itemsWrapperElement;if(!(typeof window>"u"||!e))try{this._gridObserver=new ResizeObserver(()=>{this.#r()}),this._gridObserver.observe(e)}catch{this._gridObserver=null}}#y(){const e=this._itemsWrapperElement;if(!(typeof window>"u"||!e))try{this._mutationObserver=new MutationObserver(r=>{for(const i of r)if(i.type==="attributes"&&(i.attributeName==="class"||i.attributeName==="style")){this.#r();break}}),this._mutationObserver.observe(e,{attributes:!0,attributeFilter:["class","style"]})}catch{this._mutationObserver=null}}#r(){const e=this._itemsWrapperElement;if(!e){this._gridDetected=!1,this._gridColumns=1;return}let r=!1,i=1;try{const a=getComputedStyle(e);if(a.display==="grid"){const d=a.gridTemplateColumns,u=/repeat\(\s*(\d+)\s*,/i.exec(d);if(u&&u[1])i=Math.max(1,parseInt(u[1],10)),r=!0;else if(d&&d!=="none"){const s=this.#M(d);Number.isFinite(s)&&s>0&&(i=s,r=!0)}}}catch{}if(!r){const a=e.children;if(a&&a.length>0){const d=a[0].getBoundingClientRect().top;let u=0;for(let s=0;s<a.length;s+=1){const m=a[s].getBoundingClientRect().top;if(Math.abs(m-d)<=1)u+=1;else break}u>0&&(i=u,r=u>1)}}this._gridDetected=r,this._gridColumns=Math.max(1,i),this._internalDebug}#M(e){let r=0,i=0,a=!1;for(let d=0;d<e.length;d+=1){const u=e[d];u==="("?r+=1:u===")"&&(r=Math.max(0,r-1)),r===0&&/\s/.test(u)?a&&(i+=1,a=!1):u!==" "&&(a=!0)}return a&&(i+=1),i}}var qr=U("<option> </option>"),$r=U("<select><option></option><!></select>"),Yr=(c,e)=>e().showModal(),Jr=U("<button> </button>"),Kr=(c,e,r,i)=>{y(e,r().map(a=>({value:a,selected:!1})),!0),i(t(e).filter(a=>a.selected).map(a=>a.value))},Qr=(c,e,r,i)=>{y(e,r().map(a=>({value:a,selected:!0})),!0),i(t(e).filter(a=>a.selected).map(a=>a.value))},Xr=(c,e,r,i)=>{e().selected=!e().selected,r(t(i).filter(a=>a.selected).map(a=>a.value))},Zr=U('<button><span class="whitespace-nowrap overflow-hidden max-w-full overflow-ellipsis"> </span> <input type="checkbox" class="ml-auto" readonly=""/></button>'),ei=(c,e)=>{e()?.close()},ti=U('<div class="flex flex-col h-full max-h-full gap-4 overflow-hidden"><div class="flex flex-row flex-wrap gap-4 order-1"><button>Tyhjennä valinnat</button> <button>Valitse kaikki</button></div> <input type="text" placeholder="Hae..." class="flex shrink-0 rounded border border-gray-300 px-1.5 py-0.5 order-2"/> <div class="flex max-h-full flex-col overflow-auto rounded border border-gray-300 h-[var(--height)] col-span-full lg:col-span-1 order-4 lg:order-3"><!></div></div> <div class="flex flex-row flex-wrap justify-end gap-4"><button>Sulje</button></div>',1);function Rt(c,e){We(e,!0);let r=ge(e,"value",15),i=ge(e,"options",19,()=>[]),a=k(Ie(i().map(x=>({value:x,selected:!1}))));xe(()=>{r().length===0&&y(a,i().map(x=>({value:x,selected:!1})),!0)});const d=G(()=>r().length>1?`${r().length} valittu`:r().length==1?r().at(0):"Ei valintoja");let u=k("");var s=Ot(),m=Ee(s);{var h=x=>{var _=$r(),H=I(f(_));ze(H,17,i,Ke,(E,D)=>{var M=qr(),T=f(M,!0);g(M);var S={};X(()=>{P(T,t(D)),S!==(S=t(D))&&(M.value=(M.__value=t(D))??"")}),O(E,M)}),g(_),X(E=>J(_,1,E),[()=>$(Y(te.input(),"w-full"))]),gt(_,r),O(x,_)},l=x=>{pr(x,{renderButton:(E,D=Ue)=>{var M=Jr();M.__click=[Yr,D];var T=f(M,!0);g(M),X((S,V)=>{J(M,1,S),Z(M,"title",V),P(T,t(d))},[()=>$(Y(te.button(),"w-full justify-start")),()=>`${r().slice(0,3).join(", ")}${r().length>3?` + ${r().length-3} muuta`:""}`]),O(E,M)},renderContent:(E,D=Ue)=>{var M=ti(),T=Ee(M),S=f(T),V=f(S);V.__click=[Kr,a,i,r];var z=I(V,2);z.__click=[Qr,a,i,r],g(S);var ne=I(S,2);Xe(ne);var we=I(ne,2);mt(we,"",{},{"--height":"560px;"});var me=f(we);{const ae=(ue,fe=Ue)=>{var ee=Zr();ee.__click=[Xr,fe,r,a];var se=f(ee),ye=f(se,!0);g(se);var Me=I(se,2);Xe(Me),g(ee),X(oe=>{J(ee,1,oe),Z(se,"title",fe().value),P(ye,fe().value)},[()=>$(Y(te.button(),"bg-inherit w-full rounded-none border-none"))]),vr(Me,()=>fe().selected,oe=>fe().selected=oe),O(ue,ee)};let Te=G(()=>t(u)?t(a).filter(ue=>ue.value.toLowerCase().includes(t(u).toLowerCase())):t(a));Vt(me,{get items(){return t(Te)},bufferSize:50,itemsClass:"even",renderItem:ae,$$slots:{renderItem:!0}})}g(we),g(T);var ce=I(T,2),n=f(ce);n.__click=[ei,D],g(ce),X((ae,Te,ue)=>{J(V,1,ae),J(z,1,Te),J(n,1,ue)},[()=>$(Y(te.button({type:"negative"}))),()=>$(Y(te.button())),()=>$(Y(te.button({type:"negative"})))]),ft(ne,()=>t(u),ae=>y(u,ae)),O(E,M)},$$slots:{renderButton:!0,renderContent:!0}})};le(m,x=>{i().length<=5?x(h):x(l,!1)})}O(c,s),qe()}Lt(["click"]);var ri=U('<input type="number"/> <span class="my-auto">-</span> <input type="number"/>',1);function ii(c,e){We(e,!0);let r=ge(e,"value",31,()=>Ie([-1/0,1/0])),i=ge(e,"min",3,0),a=ge(e,"max",3,100),d=ge(e,"step",3,1);var u=ri(),s=Ee(u);Xe(s);var m=I(s,4);Xe(m),X((h,l)=>{Z(s,"min",i()),Z(s,"max",r()[1]),Z(s,"step",d()),J(s,1,h),Z(m,"min",r()[0]),Z(m,"max",a()),Z(m,"step",d()),J(m,1,l)},[()=>$(Y(te.input(),"w-full")),()=>$(Y(te.input(),"w-full"))]),ft(s,()=>r()[0],h=>r(r()[0]=h,!0)),ft(m,()=>r()[1],h=>r(r()[1]=h,!0)),O(c,u),qe()}const ai=(c,e,r)=>{const i="https://images.alko.fi/images/cs_srgb,f_auto,t_products/cdn";e.toLowerCase,e=String(e);const a=e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"");return`${i}/${c}/${a}.jpg`};function et(c,e){return e&&Object.hasOwn(je,e)?`${c} ${je[e]}`:c}function Qe(c){return Object.hasOwn(Ze,c)?Ze[c]:c}function Ae(c,e){return e?`${Qe(e)}: ${et(c,e)}`:et(c)}function ni(c,e){return e&&e in dt?c?dt[e][0]:dt[e][1]:c?"Nouseva":"Laskeva"}var si=U('<label class=" text-sm"> </label> <div class="flex w-full flex-row gap-2"><!></div>',1),oi=U("<label> </label> <!>",1),li=U("<label> </label> <!> <!>",1),ci=U('<div class="flex w-full flex-col text-sm"><!></div>'),ui=(c,e,r)=>{e(),y(r,!t(r))},di=U("<button><span>Sulje suodattimet</span></button>"),hi=U("<option> </option>"),gi=U("<button><span> </span> <!></button>"),mi=U("<option> </option>"),fi=U('<p class="rounded bg-red-200 px-1.5 py-0.5 text-red-800 text-sm">Uutuus</p>'),pi=U('<p class="rounded bg-green-300 px-1.5 py-0.5 text-green-800 text-sm">Luomu</p>'),vi=U('<p class="rounded bg-emerald-300 px-1.5 py-0.5 text-emerald-800 text-sm">Vegaani</p>'),_i=U('<p class="rounded bg-blue-300 px-1.5 py-0.5 text-blue-800 text-sm">Alkoholiton</p>'),bi=U('<div><div><div class="flex aspect-square w-32 max-w-[8rem]"><img class="block h-full w-full object-contain"/></div> <div class="flex w-full flex-col gap-2"><div class="flex flex-row items-center gap-3"><span class="absolute top-0 left-0 rounded-br bg-gray-100 p-0.5 text-sm text-gray-500"> </span> <a target="_blank" rel="noopener noreferrer" class="hover:underline"><h2 class="text-xl font-bold md:text-2xl"> </h2></a></div> <div class="flex flex-col items-start gap-0.5 md:flex-row md:gap-3"><div class="flex flex-col gap-0.5 md:gap-1"><p> </p> <p> </p> <p> </p></div> <div class="flex flex-col gap-0.5 md:gap-1"><p> </p> <p> </p> <p> </p></div></div> <div class="flex items-center gap-2 text-sm text-gray-500"><!> <span class="text-sm"> </span></div> <div class="flex flex-col gap-4 md:flex-row md:items-center"><div class="flex items-center gap-2"><p class="text-2xl font-bold drop-shadow-lg"> </p> <span class="text-sm text-gray-500"> </span></div> <!> <!> <!> <!></div></div></div> <div class="relative block max-w-full"><div class="relative flex h-full w-fit shrink-0 flex-nowrap items-center gap-1 bg-black px-1.5 py-0.5 text-sm whitespace-nowrap text-white"><p> </p> <span class="text-xs"> </span></div> <div class="relative block h-4 w-full rounded-b bg-gradient-to-r from-red-500 via-amber-500 to-green-500"><div class="absolute block h-full w-1 shrink-0 -translate-x-1/2 bg-black whitespace-nowrap"></div></div></div></div>'),xi=(c,e,r)=>{e(),y(r,!t(r))},wi=U("<button><span> </span> <!></button>"),Ti=U("<p>Ei tuloksia</p>"),yi=U('<div class="relative grid h-full grid-cols-[auto_1fr]"><aside class="flex h-full flex-col overflow-x-hidden overflow-y-auto border-gray-300 md:w-84 md:border-r"><dialog><!> <div class="flex flex-col sticky bottom-0 mt-auto w-full gap-2 p-2 bg-white border rounded-lg border-gray-300"><button><!> <span>Tyhjennä suodattimet</span></button> <!></div></dialog></aside> <main class="mx-auto flex h-full w-full flex-col gap-3 bg-gray-100 p-4 md:gap-4 md:p-6"><div class="flex w-full flex-col items-start gap-4"><div><div class="flex flex-col"><label class="text-sm"></label> <div class="flex flex-row flex-nowrap items-center"><select name="sortingColumn" id="sortingColumn"></select> <!></div></div> <div class="flex flex-col"><label class="text-sm"></label> <select name="selectedHighlight" id="selectedHighlight"></select></div></div></div> <div class="flex flex-row flex-wrap justify-between gap-2"><p> </p> <button><!> <span>Hyppää alkuun</span></button></div> <div class="flex flex-auto flex-col"><!></div> <!> <!></main></div>');function Mi(c,e){We(e,!0);let r=null;const i=new Sr(e.dataset.table,_r),a=Bt;function d(){return[...Bt,w.BeerType].reduce((C,p)=>(i.getFilterType(p)=="number"?C[p]=i.getMinAndMaxValues(p):i.getFilterType(p)=="string"?C[p]=[]:i.getFilterType(p)=="any"&&(C[p]=[]),C),{})}let u=k(Ie(d())),s=k(Ie(ht)),m=k(Ie(ht)),h=G(()=>wr[t(m)]||!1),l,x=k(Ie(window.matchMedia("(width <= 48rem)").matches)),_=G(()=>!t(x));xe(()=>{l.open&&l.close(),!t(x)&&l.show()}),xe(()=>{(t(u)[w.Type]?.length!==1||t(u)[w.Type]?.[0]!=="Oluet")&&(t(u)[w.BeerType]=[])});function H(){l&&(l.open?l.close():t(x)?l.showModal():l.show())}let E=G(()=>{let C={...t(u)};Object.keys(C).forEach(v=>{Array.isArray(C[v])&&i.getFilterType(v)!=="number"&&(C[v]=new Set(C[v]))});let p=i.filter(C);return t(m)&&(p=p.sort((v,W)=>v[t(m)]>W[t(m)]?1:-1)),t(h)||(p=p.reverse()),p});window.addEventListener("resize",()=>{y(x,window.matchMedia("(width <= 48rem)").matches,!0)});var D=yi(),M=f(D),T=f(M),S=f(T);ze(S,17,()=>a,Ke,(C,p)=>{const v=G(()=>crypto.randomUUID()),W=G(()=>i.getFilterValues(t(p))),o=G(()=>i.getFilterType(t(p)));var b=ci(),A=f(b);{var R=B=>{const L=G(()=>{const[K,be]=i.getMinAndMaxValues(t(p));return{min:K,max:be}});var j=si(),F=Ee(j),re=f(F);g(F);var ie=I(F,2),_e=f(ie);ii(_e,{get min(){return t(L).min},get max(){return t(L).max},step:.01,get value(){return t(u)[t(p)]},set value(K){t(u)[t(p)]=K}}),g(ie),X(()=>{Z(F,"for",t(v)),P(re,`${Ze[t(p)]??t(p)??""}
							${je[t(p)]?` (${je[t(p)]})`:""}`)}),O(B,j)},N=B=>{var L=li(),j=Ee(L),F=f(j,!0);g(j);var re=I(j,2);Rt(re,{get options(){return t(W)},get name(){return t(p)},get value(){return t(u)[t(p)]},set value(K){t(u)[t(p)]=K}});var ie=I(re,2);{var _e=K=>{var be=oi(),Be=Ee(be),Fe=f(Be,!0);g(Be);var Le=I(Be,2);{let Oe=G(()=>i.getFilterValues(w.BeerType));Rt(Le,{get options(){return t(Oe)},get name(){return w.BeerType},get value(){return t(u)[w.BeerType]},set value(it){t(u)[w.BeerType]=it}})}X(()=>{Z(Be,"for",t(v)),P(Fe,Ze[w.BeerType]??w.BeerType)}),O(K,be)};le(ie,K=>{t(p)===w.Type&&[w.Type].length===1&&t(u)[w.Type]?.[0]==="Oluet"&&K(_e)})}X(()=>{Z(j,"for",t(v)),P(F,t(p))}),O(B,L)};le(A,B=>{t(o)==="number"?B(R):B(N,!1)})}g(b),O(C,b)});var V=I(S,2),z=f(V);z.__click=()=>{y(u,d(),!0),r?.scroll({index:0})};var ne=f(z);Ne(ne,{name:"x_circle"}),Et(2),g(z);var we=I(z,2);{var me=C=>{var p=di();p.__click=[ui,H,_],X(v=>J(p,1,v),[()=>$(Y(te.button(),"w-full"))]),O(C,p)};le(we,C=>{t(x)&&C(me)})}g(V),g(T),Ge(T,C=>l=C,()=>l),g(M);var ce=I(M,2),n=f(ce),ae=f(n),Te=f(ae),ue=f(Te);Z(ue,"for","sortingColumn"),ue.textContent="Järjestys";var fe=I(ue,2),ee=f(fe);ze(ee,21,()=>br,Ke,(C,p)=>{var v=hi(),W=f(v,!0);g(v);var o={};X(b=>{P(W,b),o!==(o=t(p))&&(v.value=(v.__value=t(p))??"")},[()=>Qe(t(p))]),O(C,v)}),g(ee);var se=I(ee,2);{var ye=C=>{var p=gi();p.__click=()=>{y(h,!t(h)),r?.scroll({index:0,smoothScroll:!1})};var v=f(p),W=f(v,!0);g(v);var o=I(v,2);{let b=G(()=>t(h)?"arrow_up":"arrow_down");Ne(o,{get name(){return t(b)}})}g(p),X((b,A)=>{J(p,1,b),P(W,A)},[()=>$(Y(te.button(),"rounded-none rounded-e border-s-0")),()=>ni(t(h),t(m))]),O(C,p)};le(se,C=>{t(m)&&C(ye)})}g(fe),g(Te);var Me=I(Te,2),oe=f(Me);Z(oe,"for","selectedHighlight"),oe.textContent="Korostus";var Q=I(oe,2);ze(Q,21,()=>xr,Ke,(C,p)=>{var v=mi(),W=f(v,!0);g(v);var o={};X(b=>{P(W,b),o!==(o=t(p))&&(v.value=(v.__value=t(p))??"")},[()=>Qe(t(p))]),O(C,v)}),g(Q),g(Me),g(ae),g(n);var He=I(n,2),pe=f(He),Ce=f(pe);g(pe);var De=I(pe,2);De.__click=()=>{r?.scroll({index:0,smoothScroll:!1})};var ve=f(De);Ne(ve,{name:"arrow_up"}),Et(2),g(De),g(He);var ke=I(He,2),$e=f(ke);Ge(Vt($e,{get items(){return t(E)},bufferSize:50,itemsClass:"flex flex-col gap-3",renderItem:(p,v=Ue,W=Ue)=>{const o=G(()=>{const[q,de]=i.getMinAndMaxValues(t(s));return{_:q,max:de}}),b=G(()=>Number(v()[t(s)])/t(o).max),A=G(()=>["Matala","Kohtalainen","Korkea"]),R=G(()=>t(A)[Number(((t(A).length-1)*t(b)).toFixed(0))]);var N=bi(),B=f(N),L=f(B),j=f(L);g(L);var F=I(L,2),re=f(F),ie=f(re),_e=f(ie,!0);g(ie);var K=I(ie,2),be=f(K),Be=f(be);g(be),g(K),g(re);var Fe=I(re,2),Le=f(Fe),Oe=f(Le),it=f(Oe,!0);g(Oe);var at=I(Oe,2),Nt=f(at);g(at);var pt=I(at,2),Pt=f(pt,!0);g(pt),g(Le);var vt=I(Le,2),nt=f(vt),Ut=f(nt,!0);g(nt);var st=I(nt,2),zt=f(st,!0);g(st);var _t=I(st,2),jt=f(_t,!0);g(_t),g(vt),g(Fe);var ot=I(Fe,2),bt=f(ot);Ne(bt,{name:"map_pin"});var xt=I(bt,2),Gt=f(xt);g(xt),g(ot);var wt=I(ot,2),lt=f(wt),ct=f(lt),Wt=f(ct);g(ct);var Tt=I(ct,2),qt=f(Tt);g(Tt),g(lt);var yt=I(lt,2);{var $t=q=>{var de=fi();O(q,de)};le(yt,q=>{v()[w.New]&&q($t)})}var Mt=I(yt,2);{var Yt=q=>{var de=pi();O(q,de)};le(Mt,q=>{v()[w.SpecialGroup]==="Luomu"&&q(Yt)})}var Ht=I(Mt,2);{var Jt=q=>{var de=vi();O(q,de)};le(Ht,q=>{v()[w.SpecialGroup]==="Vegaaneille soveltuva tuote"&&q(Jt)})}var Kt=I(Ht,2);{var Qt=q=>{var de=_i();O(q,de)};le(Kt,q=>{v()[w.AlcoholPercentage]===0&&q(Qt)})}g(wt),g(F),g(B);var Ct=I(B,2),Je=f(Ct),ut=f(Je),Xt=f(ut);g(ut);var St=I(ut,2),Zt=f(St,!0);g(St),g(Je);var It=I(Je,2),er=f(It);g(It),g(Ct),g(N),X((q,de,tr,rr,ir,ar,nr,sr,or,lr,cr,ur,dr)=>{J(N,1,q),J(B,1,de),Z(j,"src",tr),Z(j,"alt",v()[w.Name]),P(_e,"#"+(W()+1)),Z(K,"href",`https://www.alko.fi/tuotteet/${v()[w.Number]}`),P(Be,`${v()[w.Name]??""} (${rr??""})`),P(it,ir),P(Nt,`${ar??""}
											${nr??""}`),P(Pt,sr),P(Ut,or),P(zt,lr),P(jt,cr),P(Gt,`${v()[w.Country]??""}
										${(v()[w.Region]?` - ${v()[w.Region]}`:null)??""}`),P(Wt,`${ur??""} €`),P(qt,`(${v()[w.PricePerLiter]??""} €/L)`),mt(Je,`left: ${100*t(b)}%; transform: translateX(-${100*t(b)}%);`),P(Xt,`${dr??""}: ${v()[t(s)]??""}
									${je[t(s)]??""}`),P(Zt,t(R)),mt(er,`left: ${100*t(b)}%; transform: translateX(${50-100*t(b)}%);`)},[()=>$(Y("relative flex flex-col gap-3 rounded border border-gray-300 bg-white")),()=>$(Y("flex flex-col flex-nowrap items-center gap-4 p-4 pb-0 md:flex-row")),()=>ai(v()[w.Number],v()[w.Name]),()=>et(v()[w.BottleSize],w.BottleSize),()=>Ae(v()[w.Manufacturer],w.Manufacturer),()=>Ae(v()[w.Type],w.Type),()=>v()[w.Type]==="Oluet"?`- ${et(v()[w.BeerType],w.BeerType)}`:null,()=>Ae(v()[w.Availability],w.Availability),()=>Ae(v()[w.AlcoholPercentage],w.AlcoholPercentage),()=>Ae(v()[w.AlcoholGramsPerEuro],w.AlcoholGramsPerEuro),()=>Ae(v()[w.EstimatedPromille],w.EstimatedPromille),()=>Number.parseFloat(v()[w.Price]).toFixed(2),()=>Qe(t(s))]),O(p,N)},$$slots:{renderItem:!0}}),p=>r=p,()=>r),g(ke);var Ye=I(ke,2);{var Re=C=>{var p=wi();p.__click=[xi,H,_];var v=f(p),W=f(v,!0);g(v);var o=I(v,2);Ne(o,{name:"filter"}),g(p),X(b=>{J(p,1,b),P(W,t(_)?"Piilota suodattimet":"Näytä suodattimet")},[()=>$(Y(te.button(),"w-full"))]),O(C,p)};le(Ye,C=>{t(x)&&C(Re)})}var tt=I(Ye,2);{var rt=C=>{var p=Ti();O(C,p)};le(tt,C=>{t(E).length==0&&C(rt)})}g(ce),g(D),X((C,p,v,W,o,b)=>{J(T,1,C),J(z,1,p),J(ae,1,v),J(ee,1,W),J(Q,1,o),P(Ce,`Tulosten määrä: ${t(E).length??""}`),J(De,1,b)},[()=>$(Y("relative m-auto hidden h-full w-full flex-col gap-4 rounded-lg border border-gray-300 p-4 backdrop:backdrop-blur-sm open:flex md:relative md:rounded-none md:border-0")),()=>$(Y(te.button({type:"negative"}),"w-full","mt-auto")),()=>$(Y("flex flex-row flex-wrap items-end gap-2")),()=>$(Y(te.input(),"rounded-none rounded-s pe-8")),()=>$(Y(te.input(),"pe-8")),()=>$(Y(te.button()))]),fr("close",T,()=>y(_,!1)),gt(ee,()=>t(m),C=>y(m,C)),gt(Q,()=>t(s),C=>y(s,C)),O(c,D),qe()}Lt(["click"]);function Ai(c,e){We(e,!0);var r=Ot(),i=Ee(r);Tr(i,()=>e.data.dataset,null,(a,d)=>{Mi(a,{get dataset(){return t(d)}})}),O(c,r),qe()}export{Ai as component,Bi as universal};
